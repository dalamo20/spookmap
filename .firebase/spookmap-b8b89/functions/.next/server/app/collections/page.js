(()=>{var e={};e.id=798,e.ids=[798],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14860:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>r.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>d,routeModule:()=>u,tree:()=>c}),s(85083),s(54393),s(90996);var o=s(30170),n=s(45002),a=s(83876),r=s.n(a),l=s(66299),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);s.d(t,i);let c=["",{children:["collections",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,85083)),"/Users/ypham/Desktop/danielProjects/spookmap/app/collections/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,54393)),"/Users/ypham/Desktop/danielProjects/spookmap/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,90996,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/ypham/Desktop/danielProjects/spookmap/app/collections/page.tsx"],p="/collections/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new o.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/collections/page",pathname:"/collections",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},30470:(e,t,s)=>{Promise.resolve().then(s.bind(s,76725))},10822:(e,t,s)=>{Promise.resolve().then(s.bind(s,63960))},10978:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,63642,23)),Promise.resolve().then(s.t.bind(s,87586,23)),Promise.resolve().then(s.t.bind(s,47838,23)),Promise.resolve().then(s.t.bind(s,58057,23)),Promise.resolve().then(s.t.bind(s,77741,23)),Promise.resolve().then(s.t.bind(s,13118,23))},76725:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c,dynamic:()=>i});var o=s(97247),n=s(28964),a=s(19898),r=s(34178),l=s(44597);let i="force-dynamic",c=()=>{let{data:e}=(0,a.useSession)(),[t,s]=(0,n.useState)([]),[i,c]=(0,n.useState)(""),[d,p]=(0,n.useState)(null),[m,u]=(0,n.useState)(""),h=(0,r.useRouter)();(0,n.useEffect)(()=>{e&&(console.log("Session Data:",e),console.log("User Email:",e?.user?.email),g())},[e]);let g=async()=>{try{let t=await fetch(`/api/collections?userId=${e?.user?.email}`),o=await t.json();console.log("Fetched Collections:",o),s(o.collections||[])}catch(e){console.error("Error fetching collections:",e),s([])}},x=async()=>{if(!i){console.error("Missing collection name");return}try{let o=await fetch("/api/collections/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i,userEmail:e?.user?.email})}),n=await o.json();console.log("Created Collection:",n),n.success&&(s([...t,{id:n.collectionId,name:i}]),c(""))}catch(e){console.error("Error creating collection:",e)}},j=async e=>{try{await fetch("/api/collections/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionId:e})}),console.log("Deleted Collection ID:",e),s(t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting collection:",e)}},y=(e,t)=>{p(e),u(t)},v=async()=>{if(d&&m.trim())try{let e=await fetch("/api/collections/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionId:d,newName:m})});(await e.json()).success&&(s(t.map(e=>e.id===d?{...e,name:m}:e)),p(null),u(""))}catch(e){console.error("Error updating collection:",e)}},P=e=>{console.log("Navigating to collection:",e),h.push(`/collections/${e}`)};return e?o.jsx(o.Fragment,{children:(0,o.jsxs)("div",{className:"collections-container",children:[(0,o.jsxs)("div",{className:"nav-div",children:[o.jsx("div",{className:"home-content",children:o.jsx(l.default,{src:"/images/SpookMap_logo.svg",alt:"Spooky background image",width:300,height:200,className:"ghost-image"})}),(0,o.jsxs)("div",{className:"btn-cont",children:[o.jsx("button",{className:"collections-btn home-btn",onClick:()=>window.location.href="/home",children:o.jsx("span",{children:"Home"})}),o.jsx("a",{className:"signOutBtn",onClick:()=>(0,a.signOut)({callbackUrl:"/"}),children:"Sign Out"})]})]}),(0,o.jsxs)("div",{className:"manage-container",children:[o.jsx("p",{className:"cust-heading",children:"Manage Your Collections"}),(0,o.jsxs)("div",{className:"coll-input-container",children:[o.jsx("input",{type:"text",placeholder:"New collection name",value:i,onChange:e=>c(e.target.value)}),o.jsx("button",{className:"collections-btn create-btn",onClick:x,children:"Create Collection"})]})]}),o.jsx("div",{className:"collections-grid",children:t.length>0?t.map(e=>o.jsx("div",{className:"collection-card",style:{cursor:"pointer"},children:d===e.id?(0,o.jsxs)(o.Fragment,{children:[o.jsx("input",{type:"text",value:m,onChange:e=>u(e.target.value),placeholder:"New collection name"}),o.jsx("button",{onClick:v,className:"update-btn",children:"Save"})]}):(0,o.jsxs)(o.Fragment,{children:[o.jsx(l.default,{className:"city-img",src:"/images/city.jpg",alt:"city",width:100,height:100,onClick:()=>P(e.id)}),o.jsx("button",{onClick:()=>y(e.id,e.name),className:"edit-btn",children:"Edit"}),(0,o.jsxs)("div",{className:"card-content",children:[o.jsx("h3",{className:"collection-name",children:e.name}),o.jsx(l.default,{onClick:()=>j(e.id),className:"delete-btn",src:"/images/delete.png",alt:"trash icon",width:30,height:30})]})]})},e.id)):o.jsx("p",{children:"No collections found."})})]})}):o.jsx("p",{children:"Please log in to manage your collections."})}},63960:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var o=s(97247),n=s(19898);s(28964);let a=({children:e})=>o.jsx(n.SessionProvider,{children:e})},34178:(e,t,s)=>{"use strict";var o=s(25289);s.o(o,"useParams")&&s.d(t,{useParams:function(){return o.useParams}}),s.o(o,"useRouter")&&s.d(t,{useRouter:function(){return o.useRouter}}),s.o(o,"useSearchParams")&&s.d(t,{useSearchParams:function(){return o.useSearchParams}})},85083:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a,dynamic:()=>n});var o=s(45347);let n=(0,o.createProxy)(String.raw`/Users/ypham/Desktop/danielProjects/spookmap/app/collections/page.tsx#dynamic`),a=(0,o.createProxy)(String.raw`/Users/ypham/Desktop/danielProjects/spookmap/app/collections/page.tsx#default`)},54393:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>l});var o=s(72051),n=s(31312),a=s.n(n);let r=(0,s(45347).createProxy)(String.raw`/Users/ypham/Desktop/danielProjects/spookmap/components/SessionWrapper.tsx#default`);s(67272);let l={title:"Create Next App",description:"Generated by create next app"};function i({children:e}){return o.jsx(r,{children:o.jsx("html",{lang:"en",children:o.jsx("body",{className:a().className,children:e})})})}},67272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),o=t.X(0,[379,110,597],()=>s(14860));module.exports=o})();