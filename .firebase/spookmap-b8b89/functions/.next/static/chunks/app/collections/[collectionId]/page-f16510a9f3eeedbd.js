(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[244],{8108:function(e,s,n){Promise.resolve().then(n.bind(n,1432))},1432:function(e,s,n){"use strict";n.r(s),n.d(s,{dynamic:function(){return l}});var c=n(7437),o=n(2265),t=n(9376),a=n(605),i=n(3145);let l="force-dynamic";s.default=()=>{let{data:e}=(0,a.useSession)(),{collectionId:s}=(0,t.useParams)(),[n,l]=(0,o.useState)([]),[r,d]=(0,o.useState)(""),h=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"";(0,o.useEffect)(()=>{e&&s?(console.log("Fetching places for collectionId:",s),fetch("/api/collections/".concat(s,"/places")).then(e=>e.json()).then(e=>{console.log("Fetched places:",e),l(e.places.map(e=>({...e,description:h(e.description)}))),d(e.collection.name)}).catch(e=>console.error("Error fetching places:",e))):console.log("No session or collectionId found:",{session:e,collectionId:s})},[e,s]);let u=async e=>{try{let n=await fetch("/api/collections/removePlace",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionId:s,placeId:e})});if(n.ok)l(s=>s.filter(s=>s.id!==e)),console.log("Place removed successfully.");else{let e=await n.json();console.error("Error removing place:",e.error)}}catch(e){console.error("Error removing place:",e)}};return e?(0,c.jsxs)("div",{className:"places-container",children:[(0,c.jsxs)("div",{className:"nav-div",children:[(0,c.jsx)("div",{className:"home-content",children:(0,c.jsx)(i.default,{src:"/images/SpookMap_logo.svg",alt:"Spooky background image",width:300,height:200,className:"ghost-image"})}),(0,c.jsxs)("div",{className:"btn-cont",children:[(0,c.jsx)("button",{className:"collections-btn home-btn",onClick:()=>window.location.href="/home",children:(0,c.jsx)("span",{children:"Home"})}),(0,c.jsxs)("button",{style:{marginLeft:"10px"},className:"collections-btn",onClick:()=>window.location.href="/collections",children:[(0,c.jsx)("span",{children:"Collections"}),(0,c.jsx)(i.default,{src:"/images/Save.png",alt:"save ribbon",width:20,height:20})]}),(0,c.jsx)("a",{className:"signOutBtn",onClick:()=>(0,a.signOut)({callbackUrl:"/"}),children:"Sign Out"})]})]}),(0,c.jsx)("p",{className:"page-heading",children:r?"Haunts in ".concat(r):"Haunts in Collection"}),(0,c.jsx)("div",{}),n.length>0?(0,c.jsx)("ul",{children:n.map(e=>(0,c.jsxs)("div",{className:"haunts",children:[(0,c.jsx)(i.default,{className:"location-img",src:"/images/Location.png",alt:"location icon",width:20,height:20}),(0,c.jsxs)("li",{children:[(0,c.jsx)("h3",{children:e.name}),(0,c.jsx)("p",{children:e.description}),(0,c.jsx)("p",{children:(0,c.jsx)("i",{children:e.city&&e.state_abbrev?"".concat(e.city,", ").concat(e.state_abbrev):"City, State"})}),(0,c.jsx)(i.default,{onClick:()=>u(e.id),className:"remove-btn",src:"/images/delete.png",alt:"trash icon",width:20,height:20})]},e.id)]},e.id))}):(0,c.jsx)("p",{children:"No places found in this collection."})]}):(0,c.jsx)("p",{children:"Please log in to view this collection."})}},9376:function(e,s,n){"use strict";var c=n(5475);n.o(c,"useParams")&&n.d(s,{useParams:function(){return c.useParams}}),n.o(c,"useRouter")&&n.d(s,{useRouter:function(){return c.useRouter}}),n.o(c,"useSearchParams")&&n.d(s,{useSearchParams:function(){return c.useSearchParams}})}},function(e){e.O(0,[605,145,971,117,744],function(){return e(e.s=8108)}),_N_E=e.O()}]);